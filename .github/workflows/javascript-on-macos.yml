name: Install JavaScript on macOS

on:
  pull_request:
    branches:
      - main
  push:
    branches-ignore:
      - main
  schedule:
    - cron: '40 10 * * *'

env:
  # Overwrite the default shell to zsh
  SHELL: /bin/zsh

jobs:
  test-on-macos-ventura-x86_64:
    runs-on: macos-13
    steps:
      # Checkout this repo
      - name: Checkout
        uses: actions/checkout@v4
      # Run the script using zsh
      - name: Install Node.js 20.0.0
        shell: zsh {0}
        run: |
          ./macos/install/javascript-node.sh -v 20.0.0
      - name: Install Node.js 20.18.1
        shell: zsh {0}
        run: |
          ./macos/install/javascript-node.sh -v 20.18.1
      - name: Install Node.js 22.12.0
        shell: zsh {0}
        run: |
          ./macos/install/javascript-node.sh -v 22.12.0
      - name: Install Node.js 23.5.0
        shell: zsh {0}
        run: |
          ./macos/install/javascript-node.sh -v 23.5.0
      - name: List all Node.js versions
        shell: zsh {0}
        run: |
          source ~/.zshrc
          nvm ls
  
  test-on-macos-sonoma-arm64:
    runs-on: macos-14
    steps:
      # Checkout this repo
      - name: Checkout
        uses: actions/checkout@v4
      # Run the script using zsh
      - name: Install Node.js 20.0.0
        shell: zsh {0}
        run: |
          ./macos/install/javascript-node.sh -v 20.0.0
      - name: Install Node.js 20.18.1
        shell: zsh {0}
        run: |
          ./macos/install/javascript-node.sh -v 20.18.1
      - name: Install Node.js 22.12.0
        shell: zsh {0}
        run: |
          ./macos/install/javascript-node.sh -v 22.12.0
      - name: Install Node.js 23.5.0
        shell: zsh {0}
        run: |
          ./macos/install/javascript-node.sh -v 23.5.0
      - name: List all Node.js versions
        shell: zsh {0}
        run: |
          source ~/.zshrc
          nvm ls